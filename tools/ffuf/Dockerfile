ARG GO_VERSION=1.18.3

FROM golang:${GO_VERSION}-alpine AS build

RUN apk add --no-cache git
WORKDIR /src

RUN git clone https://github.com/ffuf/ffuf

WORKDIR /src/ffuf

RUN go get && CGO_ENABLED=0 go build -o /ffuf .

FROM gcr.io/distroless/base

COPY --from=build /ffuf /usr/bin/ffuf

ENTRYPOINT ["/usr/bin/ffuf"]