# Containerized impacket's psexec

## Basic info

- **Current version**: 0.11.0
- **Source**: https://github.com/fortra/impacket/archive/refs/tags/impacket_0_11_0.zip

## Use indepentendly of the [containers4pentesters](https://github.com/TheArqsz/containers4pentesters) project

### CLI

Use in CLI directly as a pull from the DockerHub:

```bash
docker pull containers4pentesters/impacket-psexec
docker run -it --rm --name impacket-psexec \
        --user `id -u`:`id -g` \
        --volume "$HOME":"$HOME" \
        --volume "$(pwd)":"$(pwd)" \
        --volume /tmp:/tmp \
        -e HOME="$HOME" \
        -e TERM=$TERM \
        --network host containers4pentesters/impacket-psexec \
            --help
```

or as a build (with [containers4pentesters](https://github.com/TheArqsz/containers4pentesters) repository cloned):

```bash
docker build -q -t containers4pentesters/impacket-psexec:latest /opt/containers4pentesters/tools/impacket-psexec/
docker run -it --rm --name impacket-psexec \
        --user `id -u`:`id -g` \
        --volume "$HOME":"$HOME" \
        --volume "$(pwd)":"$(pwd)" \
        --volume /tmp:/tmp \
        -e HOME="$HOME" \
        -e TERM=$TERM \
        --network host containers4pentesters/impacket-psexec:latest \
            --help
```

### As a script

You can create a script `/usr/local/bin/impacket-psexec` with given content (pulling from the DockerHub):

```bash
#!/usr/bin/env bash

docker pull -q containers4pentesters/impacket-psexec:latest
docker run -it --rm --name impacket-psexec \
        --user `id -u`:`id -g` \
        --volume "$HOME":"$HOME" \
        --volume "$(pwd)":"$(pwd)" \
        --volume /tmp:/tmp \
        -e HOME="$HOME" \
        -e TERM=$TERM \
        --network host containers4pentesters/impacket-psexec \
            "$@"
```

or as a build process (with [containers4pentesters](https://github.com/TheArqsz/containers4pentesters) repository cloned):

```bash
#!/usr/bin/env bash

docker build -q -t containers4pentesters/impacket-psexec:latest /opt/containers4pentesters/tools/impacket-psexec/
docker run -it --rm --name impacket-psexec \
        --user `id -u`:`id -g` \
        --volume "$HOME":"$HOME" \
        --volume "$(pwd)":"$(pwd)" \
        --volume /tmp:/tmp \
        -e HOME="$HOME" \
        -e TERM=$TERM \
        --network host containers4pentesters/impacket-psexec \
            "$@"
```

You can use the script as if it was a native tool

```console
$ impacket-psexec Tester@test.local
Impacket v0.11.0 - Copyright 2023 Fortra

Password:
[*] Requesting shares on test.local.....
[*] Found writable share ADMIN$
[*] Uploading file BscYEaAj.exe
[*] Opening SVCManager on test.local.....
[*] Creating service zdzv on test.local.....
[*] Starting service zdzv.....
[!] Press help for extra shell commands
Microsoft Windows [Version 10.X]
(c) Microsoft Corporation. All rights reserved.

C:\Windows\system32> whoami
nt authority\system

C:\Windows\system32>
```