#!/usr/bin/env bash

# This setting is valid only for 'bridge' type network.
# On 'host' type you can use any native port you want.
SMB_PORT=${SMB_PORT:-1445}

if [ "$DOCKER_NETWORK_TYPE" == "host" ]; then
    log_info "You are using host network - exposing all ports"
else
    if [[ $DOCKER_OPTIONS =~ '--publish '|'-p ' ]]; then
        log_info "It seems that you want to expose some ports - using your configuration"
    else
        log_warn "Exposing port $SMB_PORT/tcp as a port 445/tcp from the container"
        DOCKER_OPTIONS="$DOCKER_OPTIONS --publish $SMB_PORT:445"
    fi
fi