#!/usr/bin/env bash

SCRIPTPATH="$( cd -- "$(dirname "$0")" >/dev/null 2>&1 ; pwd -P )"
CURRENT_TOOL=$(basename $SCRIPTPATH)
VERIFY_INSTALLED=${1:-}

test_tool() {
    help=$(bash $SCRIPTPATH/run.sh --help)
    pattern="nmap -v -A scanme.nmap.org"
    if ! grep "$pattern" <<< "$help" &>/dev/null; then
        if [ -z VERIFY_INSTALLED ]; then
            echo "Tool $CURRENT_TOOL is not installed."
        fi
        echo "Tool $CURRENT_TOOL doesn't work properly - verify installation."
        exit 1
    else
        exit 0
    fi
}

test_tool